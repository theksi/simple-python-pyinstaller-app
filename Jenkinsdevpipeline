pipeline {
    agent none
    stages {
        stage('BuildServerLess') {
            agent {
                docker {
                    image 'alpine:3'
                }
            }
            steps {
                sh 'echo "Building serverless artifacts"'
            }
        }
        stage('BuildFinops notifications') {
            agent {
                docker {
                    image 'alpine:3'
                }
            }
            steps {
                sh 'echo "Building Finops assets"'
            }
        }
        stage('BuildFinops Alarms') {
            agent {
                docker {
                    image 'alpine:3'
                }
            }
            matrix {
                axes {
                    axis {
                        name 'Region'
                        values 'us-east-1', 'eu-west-1'
                    }
                }
                steps {
                    sh 'echo "Building xxxx"'
                }
                steps {
                    sh 'echo "Building yyy"'
                }                
            }
        }        
        stage('BuildSecops') {
            agent {
                docker {
                    image 'alpine:3'
                }
            }
            steps {
                sh 'echo "Building Secops assets"'
            }
}

    }
}
